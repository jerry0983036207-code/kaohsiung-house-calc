<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lungå“¥çš„é«˜é›„è²·æˆ¿æˆ°æƒ…å®¤</title>
    <!-- å¼•å…¥ React å’Œ Tailwind -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700;900&display=swap');
        body { font-family: 'Noto Sans TC', sans-serif; background-color: #f8fafc; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // --- è¨­å®šå€ ---
        const USER_PHOTO_URL = "https://i.postimg.cc/zXqgmkHy/S-64086023.jpg"; 
        const LINE_ADD_FRIEND_URL = "https://line.me/ti/p/msIk4x7U95";

        // --- åœ–æ¨™çµ„ä»¶ (SVG) ---
        const Icons = {
            MapPin: () => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"/><circle cx="12" cy="10" r="3"/></svg>,
            TrendingUp: ({className}) => <svg className={className} xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polyline points="22 7 13.5 15.5 8.5 10.5 2 17"/><polyline points="16 7 22 7 22 13"/></svg>,
            AlertCircle: ({className}) => <svg className={className} xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="10"/><line x1="12" x2="12" y1="8" y2="12"/><line x1="12" x2="12.01" y1="16" y2="16"/></svg>,
            Home: ({size}) => <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg>,
            ShieldCheck: ({className, size}) => <svg className={className} xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z"/><path d="m9 12 2 2 4-4"/></svg>,
            Flame: ({className, size}) => <svg className={className} xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z"/></svg>,
            Calendar: ({className}) => <svg className={className} xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect width="18" height="18" x="3" y="4" rx="2" ry="2"/><line x1="16" x2="16" y1="2" y2="6"/><line x1="8" x2="8" y1="2" y2="6"/><line x1="3" x2="21" y1="10" y2="10"/></svg>,
            DollarSign: ({className}) => <svg className={className} xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><line x1="12" x2="12" y1="2" y2="22"/><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/></svg>,
            Percent: ({className}) => <svg className={className} xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><line x1="19" x2="5" y1="5" y2="19"/><circle cx="6.5" cy="6.5" r="2.5"/><circle cx="17.5" cy="17.5" r="2.5"/></svg>,
            BarChart3: ({size}) => <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M3 3v18h18"/><path d="M18 17V9"/><path d="M13 17V5"/><path d="M8 17v-3"/></svg>,
            User: ({size, className}) => <svg className={className} xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>,
            Share2: ({size}) => <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="18" cy="5" r="3"/><circle cx="6" cy="12" r="3"/><circle cx="18" cy="19" r="3"/><line x1="8.59" x2="15.42" y1="13.51" y2="17.49"/><line x1="15.41" x2="8.59" y1="6.51" y2="10.49"/></svg>,
            MessageCircle: ({size}) => <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M7.9 20A9 9 0 1 0 4 16.1L2 22Z"/></svg>
        };

        // --- è³‡æ–™åº« ---
        const MARKET_DATA_ALL_TIME_ANALYSIS = [
            { district: 'é¼“å±±å€', area: 'ç¾è¡“é¤¨ç‰¹å€', type: 'ä¸­å¤å¤§æ¨“(10-15å¹´)', priceRange: [1300, 2400], trend: 'ğŸ›¡ï¸ä¿å€¼', note: 'æˆ¿åƒ¹é ˜é ­ç¾Šï¼ŒæŠ—è·Œæ€§æœ€å¼·' },
            { district: 'é¼“å±±å€', area: 'ç¾è¡“é¤¨ç‰¹å€', type: 'æ–°æˆå±‹/é å”®', priceRange: [1800, 4500], trend: 'ğŸ”¥é£†æ¼²', note: 'æ–°æ¡ˆç«™ç©©5-6å­—é ­ï¼Œè±ªå®…èšè½' },
            { district: 'å·¦ç‡Ÿå€', area: 'é«˜éµç‰¹å€', type: 'ä¸­å¤å¤§æ¨“(15å¹´)', priceRange: [1100, 1900], trend: 'ğŸ“ˆç©©å¥', note: 'ä¸‰éµå…±æ§‹å„ªå‹¢ï¼Œå‰›éœ€æ¥µå¼·' },
            { district: 'å·¦ç‡Ÿå€', area: 'æœè²¿ç¤¾å€', type: 'åœ“ç’°å¤§æ¨“', priceRange: [550, 950], trend: 'ğŸ’°è£œæ¼²', note: 'ä½ç¸½åƒ¹å¥½å…¥æ‰‹ï¼Œæ–°å°17ç·šåˆ©å¤š' },
            { district: 'æ¥ æ¢“å€', area: 'é«˜å¤§ç‰¹å€', type: 'æ–°æˆå±‹/æ–°å¤', priceRange: [1000, 1600], trend: 'ğŸ”¥é£†æ¼²', note: 'å°ç©é›»æ ¸å¿ƒå—æƒ å€ï¼Œé‡å¢åƒ¹æš' },
            { district: 'æ©‹é ­å€', area: 'æ–°å¸‚é®', type: 'æ–°æˆå±‹/é å”®', priceRange: [1100, 1700], trend: 'ğŸ”¥é£†æ¼²', note: 'ç§‘å­¸åœ’å€åŠ æŒï¼Œå¾1å­—é ­æ¼²è‡³3å­—é ­' },
            { district: 'ä»æ­¦å€', area: 'å…«å¦å¯®/æ¾„å¾·', type: 'é€å¤©/å¤§æ¨“', priceRange: [1200, 1900], trend: 'ğŸ“ˆç©©å¥', note: 'äººå£ç§»å…¥å…¨é«˜é›„ç¬¬ä¸€ï¼Œæ©Ÿèƒ½æˆç†Ÿ' },
            { district: 'å²¡å±±å€', area: 'ç«è»Šç«™å‘¨é‚Š', type: 'é€å¤©/å¤§æ¨“', priceRange: [900, 1500], trend: 'ğŸ“ˆç©©å¥', note: 'æ·é‹å»¶ä¼¸ç·šåˆ©å¤šï¼Œå•†å ´é€²é§' },
            { district: 'å‰é®å€', area: 'äºæ´²æ–°ç£å€', type: 'æ–°æˆå±‹/å°å®…', priceRange: [1000, 1800], trend: 'ğŸ”¥é£†æ¼²', note: 'AIè¼é”é€²é§ï¼Œ5å¹´æ–°å±‹å‡åƒ¹45è¬' },
            { district: 'å‰é®å€', area: 'ç‘éš†/äº”ç”²', type: 'ä¸­å¤å¤§æ¨“', priceRange: [750, 1250], trend: 'ğŸ›¡ï¸ä¿å€¼', note: 'ç”Ÿæ´»æ©Ÿèƒ½æ¥µä½³ï¼Œäººå£å¯†é›†' },
            { district: 'è‹“é›…å€', area: 'æ–‡åŒ–ä¸­å¿ƒ', type: 'ä¸­å¤å¤§æ¨“', priceRange: [900, 1600], trend: 'ğŸ›¡ï¸ä¿å€¼', note: 'å…¬æ•™å€ç´ è³ªé«˜ï¼Œé‡‹å‡ºç¨€æœ‰' },
            { district: 'è‹“é›…å€', area: 'ä¸‰å¤š/85å¤§æ¨“', type: 'å¥—æˆ¿/å…©æˆ¿', priceRange: [450, 850], trend: 'ğŸ’°ä½åŸºæœŸ', note: 'å¸‚ä¸­å¿ƒä½ç¸½åƒ¹ï¼Œæ”¶ç§Ÿè‡ªç”¨çš†å®œ' },
            { district: 'å‰é‡‘å€', area: 'æ„›æ²³å‘¨é‚Š', type: 'ä¸­å¤å¤§æ¨“', priceRange: [850, 1550], trend: 'ğŸ“ˆç©©å¥', note: 'æ™¯è§€å®…ç‚ºä¸»ï¼Œè¿‘æœŸè£œæ¼²æ˜é¡¯' },
            { district: 'æ–°èˆˆå€', area: 'å…­åˆ/ç¾éº—å³¶', type: 'è¯å»ˆ/å¤§æ¨“', priceRange: [700, 1300], trend: 'ğŸ’°è£œæ¼²', note: 'ä½æ–¼å¸‚ä¸­å¿ƒï¼Œç”Ÿæ´»æ©Ÿèƒ½ä¾¿åˆ©' },
            { district: 'é¹½åŸ•å€', area: 'é§äºŒç‰¹å€', type: 'ä¸­å¤å¤§æ¨“', priceRange: [650, 1100], trend: 'ğŸ“ˆç©©å¥', note: 'è§€å…‰åŠ æŒï¼Œè€å±‹ç¿»æ–°ç†±æ½®' },
            { district: 'å°æ¸¯å€', area: 'æ¼¢æ°‘å•†åœˆ', type: 'è¯å»ˆ/å¤§æ¨“', priceRange: [500, 950], trend: 'ğŸ’°ä½åŸºæœŸ', note: 'æˆ¿åƒ¹è¦ªæ°‘ï¼Œé©åˆé¦–è³¼æ—' },
            { district: 'é³³å±±å€', area: 'æ–‡å±±ç‰¹å€', type: 'ä¸­å¤å¤§æ¨“', priceRange: [1200, 2000], trend: 'ğŸ›¡ï¸ä¿å€¼', note: 'é³³å±±å¯Œäººå€ï¼ŒæŠ—è·Œæ€§æ¥µå¼·' },
            { district: 'é³³å±±å€', area: 'é³³å±±åœ‹ä¸­/å¤§å¯®', type: 'è¯å»ˆ/æ–°å¤§æ¨“', priceRange: [800, 1300], trend: 'ğŸ“ˆç©©å¥', note: 'æ·é‹æ©˜ç·šæœ«ç«¯ï¼Œæˆ¿åƒ¹ç›¸å°è¦ªæ°‘' },
            { district: 'ä¸‰æ°‘å€', area: 'æ²³å ¤ç¤¾å€', type: 'ä¸­å¤å¤§æ¨“', priceRange: [900, 1600], trend: 'ğŸ›¡ï¸ä¿å€¼', note: 'æœ‰å°å¤©æ¯ä¹‹ç¨±ï¼Œç’°å¢ƒå„ªè³ª' },
            { district: 'ä¸‰æ°‘å€', area: 'å»ºå·¥/é«˜ç§‘å¤§', type: 'ä¸­å¤å¤§æ¨“', priceRange: [750, 1350], trend: 'ğŸ“ˆç©©å¥', note: 'è¼•è»Œé€šè»Šæ•ˆç›Šï¼Œå­¸ç”Ÿç§Ÿå±‹å¸‚å ´å¤§' },
            { district: 'å¤§å¯®å€', area: 'å¤§ç™¼/å¸‚å€', type: 'é€å¤©/è¯å»ˆ', priceRange: [600, 1100], trend: 'ğŸ’°ä½åŸºæœŸ', note: 'å·¥æ¥­å€å°±æ¥­äººå£æ”¯æ’' },
            { district: 'æ—åœ’å€', area: 'æ²¿æµ·è·¯å‘¨é‚Š', type: 'é€å¤©/è¯å»ˆ', priceRange: [450, 850], trend: 'ğŸ’°ä½åŸºæœŸ', note: 'æ·é‹å°æ¸¯æ—åœ’ç·šå®šæ¡ˆåˆ©å¤š' },
        ];

        // --- ä¸»ç¨‹å¼ App ---
        const App = () => {
            const [monthlySalary, setMonthlySalary] = useState(60000);
            const [interestRate, setInterestRate] = useState(2.2);
            const [loanTermYears, setLoanTermYears] = useState(30);
            const [downPaymentRatio, setDownPaymentRatio] = useState(20);
            const [results, setResults] = useState({
                safe: { monthlyPayment: 0, loanAmount: 0, totalHousePrice: 0 },
                risk: { monthlyPayment: 0, loanAmount: 0, totalHousePrice: 0 },
            });
            const [safeHotspots, setSafeHotspots] = useState([]);
            const [riskHotspots, setRiskHotspots] = useState([]);

            useEffect(() => {
                const calc = calculateAffordability();
                if (calc) updateHotspots(calc.safe.totalHousePrice, calc.risk.totalHousePrice);
            }, [monthlySalary, interestRate, loanTermYears, downPaymentRatio]);

            const calculateAffordability = () => {
                const safeMonthlyPayment = monthlySalary / 3;
                const riskMonthlyPayment = monthlySalary * 0.6;
                const monthlyRate = interestRate / 100 / 12;
                const totalMonths = loanTermYears * 12;
                const amortizationFactor = (monthlyRate * Math.pow(1 + monthlyRate, totalMonths)) / (Math.pow(1 + monthlyRate, totalMonths) - 1);
                
                const safeLoanAmount = Math.floor(safeMonthlyPayment / amortizationFactor);
                const riskLoanAmount = Math.floor(riskMonthlyPayment / amortizationFactor);
                const loanRatio = (100 - downPaymentRatio) / 100;
                
                const safeHousePrice = Math.floor(safeLoanAmount / loanRatio);
                const riskHousePrice = Math.floor(riskLoanAmount / loanRatio);

                const newResults = {
                    safe: { monthlyPayment: Math.round(safeMonthlyPayment), loanAmount: Math.round(safeLoanAmount / 10000), totalHousePrice: Math.round(safeHousePrice / 10000) },
                    risk: { monthlyPayment: Math.round(riskMonthlyPayment), loanAmount: Math.round(riskLoanAmount / 10000), totalHousePrice: Math.round(riskHousePrice / 10000) }
                };
                setResults(newResults);
                return newResults;
            };

            const updateHotspots = (safeBudget, riskBudget) => {
                const filter = (budget) => {
                    const min = budget * 0.85;
                    const max = budget * 1.15;
                    return MARKET_DATA_ALL_TIME_ANALYSIS.filter(item => {
                        const [iMin, iMax] = item.priceRange;
                        return (min <= iMax && max >= iMin);
                    });
                };
                setSafeHotspots(filter(safeBudget));
                setRiskHotspots(filter(riskBudget));
            };

            const formatNumber = (num) => new Intl.NumberFormat('zh-TW').format(num);

            const handleShare = () => {
                if (navigator.share) {
                    navigator.share({
                        title: 'Lungå“¥çš„é«˜é›„è²·æˆ¿æˆ°æƒ…å®¤',
                        text: `æˆ‘æœˆè–ª${monthlySalary}ï¼Œç®—å‡ºå®‰å…¨è²·æˆ¿é ç®—æ˜¯${results.safe.totalHousePrice}è¬ï¼å¿«ä¾†çœ‹çœ‹ä½ åœ¨é«˜é›„èƒ½è²·å“ªï¼Ÿ`,
                        url: window.location.href,
                    });
                } else {
                    alert("é€£çµå·²è¤‡è£½ï¼å¿«å‚³çµ¦æœ‹å‹çœ‹çœ‹");
                }
            };

            const AreaCard = ({ spot, theme }) => {
                const isRisk = theme === 'risk';
                return (
                    <div className={`bg-white border rounded-xl p-4 shadow-sm hover:shadow-md transition-shadow cursor-pointer group ${isRisk ? 'border-rose-100' : 'border-emerald-100'}`}>
                        <div className="flex justify-between items-start mb-2">
                            <span className={`font-bold text-slate-800 text-lg ${isRisk ? 'group-hover:text-rose-600' : 'group-hover:text-emerald-600'} transition-colors`}>{spot.district}</span>
                            <span className="text-xs font-medium bg-slate-100 text-slate-500 px-2 py-1 rounded">{spot.area}</span>
                        </div>
                        <div className="flex items-center gap-2 mb-3">
                            <span className={`text-xs font-bold px-2 py-0.5 rounded border ${isRisk ? 'bg-rose-50 border-rose-200 text-rose-700' : 'bg-emerald-50 border-emerald-200 text-emerald-700'}`}>{spot.trend}</span>
                            <div className="flex items-center gap-1 text-sm text-slate-600"><Icons.Home size={14} /><span>{spot.type}</span></div>
                        </div>
                        <div className="flex justify-between items-end">
                            <div className={`${isRisk ? 'text-rose-600' : 'text-emerald-600'} font-bold`}>{spot.priceRange[0]}-{spot.priceRange[1]} è¬</div>
                            <div className="text-xs text-slate-400 flex items-center gap-1"><Icons.BarChart3 size={12}/>å¯¦åƒ¹å¤§æ•¸æ“š</div>
                        </div>
                        <div className="mt-3 pt-3 border-t border-slate-50 text-xs text-slate-500 flex gap-1 items-start">
                            <Icons.TrendingUp className={`mt-0.5 shrink-0 ${isRisk ? 'text-rose-400' : 'text-emerald-400'}`} />
                            {spot.note}
                        </div>
                    </div>
                );
            };

            return (
                <div className="max-w-4xl mx-auto p-4 md:p-6 bg-slate-50 min-h-screen">
                    {/* Header */}
                    <div className="text-center mb-8 relative">
                        <h2 className="text-2xl md:text-3xl font-extrabold text-slate-800 mb-2">ğŸ  Lungå“¥çš„é«˜é›„è²·æˆ¿æˆ°æƒ…å®¤</h2>
                        <p className="text-slate-500">è¼¸å…¥æœˆè–ªï¼Œç®—å‡ºä½ çš„ã€Œèˆ’é©åœˆã€èˆ‡ã€Œæˆ°å ´ã€</p>
                        <button onClick={handleShare} className="absolute right-0 top-0 hidden md:flex items-center gap-1 text-xs text-blue-500 hover:text-blue-700 bg-blue-50 px-3 py-1 rounded-full transition-colors">
                            <Icons.Share2 size={14} /><span>åˆ†äº«</span>
                        </button>
                    </div>

                    {/* Inputs */}
                    <div className="bg-white p-6 rounded-2xl shadow-sm mb-8 border border-slate-100">
                        <div className="mb-6">
                            <label className="block text-sm font-bold text-slate-600 mb-2">æ‚¨çš„æœˆæ”¶å…¥ (TWD)</label>
                            <div className="flex items-center bg-slate-50 rounded-lg px-4 py-2 border border-slate-200 focus-within:ring-2 focus-within:ring-blue-400">
                                <span className="text-xl font-bold text-slate-400 mr-2">$</span>
                                <input type="number" value={monthlySalary} onChange={(e) => setMonthlySalary(Number(e.target.value))} className="block w-full text-2xl font-bold text-slate-800 bg-transparent focus:outline-none"/>
                            </div>
                        </div>
                        <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
                            <div className="flex flex-col gap-1">
                                <div className="flex items-center gap-1 mb-1"><Icons.Percent className="text-slate-400" /><label className="text-xs font-bold text-slate-500">åˆ©ç‡ (%)</label></div>
                                <input type="number" step="0.01" value={interestRate} onChange={(e) => setInterestRate(Number(e.target.value))} className="w-full p-2 border border-slate-200 rounded-lg text-slate-700 focus:outline-blue-400"/>
                            </div>
                            <div className="flex flex-col gap-1">
                                <div className="flex items-center gap-1 mb-1"><Icons.Calendar className="text-slate-400" /><label className="text-xs font-bold text-slate-500">è²¸æ¬¾å¹´é™ (å¹´)</label></div>
                                <input type="number" value={loanTermYears} onChange={(e) => setLoanTermYears(Number(e.target.value))} className="w-full p-2 border border-slate-200 rounded-lg text-slate-700 focus:outline-blue-400"/>
                            </div>
                            <div className="flex flex-col gap-1">
                                <div className="flex items-center gap-1 mb-1"><Icons.DollarSign className="text-slate-400" /><label className="text-xs font-bold text-slate-500">è‡ªå‚™æ¬¾ (%)</label></div>
                                <input type="number" value={downPaymentRatio} onChange={(e) => setDownPaymentRatio(Number(e.target.value))} className="w-full p-2 border border-slate-200 rounded-lg text-slate-700 focus:outline-blue-400"/>
                            </div>
                        </div>
                    </div>

                    {/* Results */}
                    <div className="grid grid-cols-1 md:grid-cols-2 gap-4 mb-8">
                        {/* Safe */}
                        <div className="bg-emerald-50 border border-emerald-100 p-5 rounded-2xl flex flex-col justify-between">
                            <div>
                                <div className="flex justify-between items-start mb-4">
                                    <div><h3 className="text-lg font-bold text-emerald-800 flex items-center gap-2"><Icons.ShieldCheck size={20} className="text-emerald-600"/>333 å®‰å…¨æ³•å‰‡</h3><p className="text-xs text-emerald-600 mt-1">ç”Ÿæ´»å“è³ªå„ªï¼Œä¸æ€•å‡æ¯</p></div>
                                    <span className="bg-emerald-200 text-emerald-800 text-xs px-2 py-1 rounded-full font-bold">æ¨è–¦</span>
                                </div>
                                <div className="text-center py-2"><p className="text-sm text-emerald-600 mb-1">å»ºè­°ç¸½åƒ¹å¤©èŠ±æ¿</p><p className="text-3xl font-black text-emerald-700">{formatNumber(results.safe.totalHousePrice)} <span className="text-lg">è¬</span></p></div>
                            </div>
                            <div className="mt-4 pt-4 border-t border-emerald-200/60">
                                <div className="flex justify-between items-center text-sm font-bold text-emerald-800 bg-emerald-100/50 p-2 rounded-lg mb-2"><span>éŠ€è¡Œå¯è²¸</span><span>{formatNumber(results.safe.loanAmount)} è¬</span></div>
                                <div className="flex justify-center"><p className="text-xs text-emerald-600 bg-emerald-100/30 inline-block px-3 py-1 rounded-full">æœˆä»˜ç´„ {formatNumber(results.safe.monthlyPayment)} å…ƒ</p></div>
                            </div>
                        </div>
                        {/* Risk */}
                        <div className="bg-rose-50 border border-rose-100 p-5 rounded-2xl opacity-90 flex flex-col justify-between">
                            <div>
                                <div className="flex justify-between items-start mb-4">
                                    <div><h3 className="text-lg font-bold text-rose-800 flex items-center gap-2"><Icons.Flame size={20} className="text-rose-600"/>60% æ¥µé™è² æ“”</h3><p className="text-xs text-rose-600 mt-1">ç”Ÿæ´»æ¥µåº¦ç·Šç¹ƒï¼Œé¢¨éšªé«˜</p></div>
                                    <span className="bg-rose-200 text-rose-800 text-xs px-2 py-1 rounded-full font-bold">è­¦ç¤º</span>
                                </div>
                                <div className="text-center py-2"><p className="text-sm text-rose-600 mb-1">ç†è«–å¯è²¸æ¥µé™</p><p className="text-3xl font-black text-rose-700">{formatNumber(results.risk.totalHousePrice)} <span className="text-lg">è¬</span></p></div>
                            </div>
                            <div className="mt-4 pt-4 border-t border-rose-200/60">
                                <div className="flex justify-between items-center text-sm font-bold text-rose-800 bg-rose-100/50 p-2 rounded-lg mb-2"><span>éŠ€è¡Œå¯è²¸</span><span>{formatNumber(results.risk.loanAmount)} è¬</span></div>
                                <div className="flex justify-center"><p className="text-xs text-rose-600 bg-rose-100/30 inline-block px-3 py-1 rounded-full">æœˆä»˜ç´„ {formatNumber(results.risk.monthlyPayment)} å…ƒ</p></div>
                            </div>
                        </div>
                    </div>

                    {/* Recommendations */}
                    <div className="border-t border-slate-200 pt-8">
                        <h3 className="text-xl font-bold text-slate-800 mb-4 flex items-center gap-2"><Icons.MapPin className="text-emerald-600" /><span>ã€èˆ’é©åœˆã€‘ä¾æ“š <span className="text-emerald-600">å®‰å…¨ç¸½åƒ¹ {results.safe.totalHousePrice}è¬</span> æ¨è–¦ï¼š</span></h3>
                        {safeHotspots.length > 0 ? (
                            <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4">
                                {safeHotspots.map((spot, index) => <AreaCard key={`safe-${index}`} spot={spot} theme="safe" />)}
                            </div>
                        ) : (
                            <div className="bg-slate-50 rounded-xl p-8 text-center text-slate-500 text-sm"><p>æ­¤é ç®—å€é–“ ({results.safe.totalHousePrice}è¬) ç›®å‰è³‡æ–™åº«ä¸­è¼ƒå°‘åŒ¹é…ç‰©ä»¶ï¼Œå»ºè­°èª¿æ•´è‡ªå‚™æ¬¾æˆ–åƒè€ƒå¤–åœå€åŸŸã€‚</p></div>
                        )}
                    </div>

                    <div className="border-t border-slate-200 pt-8 mt-8">
                        <h3 className="text-xl font-bold text-slate-800 mb-2 flex items-center gap-2"><Icons.AlertCircle className="text-rose-600" /><span>ã€å£“åŠ›é‹ã€‘è‹¥ç¡¬æ‹š <span className="text-rose-600">æ¥µé™ç¸½åƒ¹ {results.risk.totalHousePrice}è¬</span>ï¼Œé›–ç„¶å¯é¸è®Šå¤šï¼š</span></h3>
                        <p className="text-xs text-rose-600 mb-4 ml-8 bg-rose-50 inline-block px-2 py-1 rounded">âš ï¸ è­¦å‘Šï¼šæ­¤å€é–“æ¯æœˆé‚„æ¬¾ä½”è–ªè³‡6æˆï¼Œè‹¥é‡å‡æ¯æˆ–å¤±æ¥­é¢¨éšªæ¥µå¤§ã€‚</p>
                        {riskHotspots.length > 0 ? (
                            <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4">
                                {riskHotspots.map((spot, index) => <AreaCard key={`risk-${index}`} spot={spot} theme="risk" />)}
                            </div>
                        ) : (
                            <div className="bg-rose-50 rounded-xl p-8 text-center text-rose-400 text-sm border border-rose-100"><p>å³ä¾¿æ‹‰é«˜åˆ°æ¥µé™é ç®— ({results.risk.totalHousePrice}è¬)ï¼Œç›®å‰è³‡æ–™åº«ä¸­ä»è¼ƒå°‘åŒ¹é…ç‰©ä»¶ã€‚</p></div>
                        )}
                    </div>

                    {/* Footer CTA */}
                    <div className="mt-12 bg-slate-800 rounded-xl p-6 text-white text-center relative overflow-hidden">
                        <div className="absolute top-0 left-0 w-full h-full bg-[radial-gradient(circle_at_50%_120%,rgba(59,130,246,0.1),transparent_70%)] pointer-events-none"></div>
                        <div className="flex flex-col items-center gap-3 relative z-10">
                            {/* é ­è²¼ */}
                            <div className="p-1 bg-gradient-to-br from-blue-400 to-emerald-400 rounded-full shadow-lg">
                                <div className="w-20 h-20 rounded-full overflow-hidden border-2 border-slate-800 relative">
                                    <img src={USER_PHOTO_URL} alt="Lungå“¥" className="w-full h-full object-cover absolute top-0 left-0" style={{ objectPosition: 'center 15%' }} />
                                </div>
                            </div>
                            <h3 className="text-lg font-bold mt-2">éœ€è¦æ›´ç²¾æº–çš„è½é»åˆ†æï¼Ÿ</h3>
                            <p className="text-slate-300 text-sm max-w-md">é€™åªæ˜¯åˆæ­¥è©¦ç®—ã€‚å¦‚æœä½ æƒ³çŸ¥é“å¦‚ä½•è«‡åˆ°æ›´å¥½çš„åƒ¹æ ¼ï¼Œæˆ–è€…é¿é–‹é‚£äº›æ•¸æ“šæ²’å‘Šè¨´ä½ çš„ã€Œåœ°é›·å€ã€ã€‚</p>
                            <button onClick={() => window.open(LINE_ADD_FRIEND_URL, '_blank')} className="mt-4 bg-[#00B900] hover:bg-[#009900] text-white font-bold py-3 px-8 rounded-full flex items-center gap-2 transition-transform active:scale-95 shadow-lg shadow-green-500/30">
                                <Icons.MessageCircle size={18} /><span>åŠ  Lungå“¥ Line é ç´„å¥æª¢</span>
                            </button>
                            <p className="text-xs text-slate-500 mt-4">Â© Lungå“¥çš„é«˜é›„è²·æˆ¿æˆ°æƒ…å®¤ | Design by Lungå“¥</p>
                        </div>
                    </div>

                    <div className="text-center mt-4 text-xs text-slate-400 pb-8">
                        <p>è³‡æ–™ä¾†æºï¼šå…§æ”¿éƒ¨å¯¦åƒ¹ç™»éŒ„ (æ­·å¹´è³‡æ–™å¤§æ•¸æ“šåˆ†æ - 2025/11/29 ç¾æ³æ›´æ–°) | æˆ¿è²¸è©¦ç®—åƒ…ä¾›åƒè€ƒï¼Œå¯¦éš›æ ¸è²¸ä¾éŠ€è¡Œç‚ºæº–</p>
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
