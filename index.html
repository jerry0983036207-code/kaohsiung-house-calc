<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Lungå“¥çš„é«˜é›„è²·æˆ¿æˆ°æƒ…å®¤ | çµ‚æ¥µç‰ˆ</title>
    <!-- å¼•å…¥ React, ReactDOM, Babel -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <!-- å¼•å…¥ Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- å¼•å…¥ Google Fonts -->
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700;900&display=swap');
        body { font-family: 'Noto Sans TC', sans-serif; background-color: #f1f5f9; -webkit-font-smoothing: antialiased; }
        .glass-effect { background: rgba(255, 255, 255, 0.95); backdrop-filter: blur(10px); }
        /* éš±è—æ»¾å‹•æ¢ä½†ä¿ç•™åŠŸèƒ½ */
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        /* å‹•ç•« */
        .fade-in { animation: fadeIn 0.5s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // ==========================================
        // ğŸ‘‡ è¨­å®šå€ (Lungå“¥å°ˆå±¬) ğŸ‘‡
        // ==========================================
        const USER_PHOTO_URL = "https://i.postimg.cc/zXqgmkHy/S-64086023.jpg"; 
        const LINE_ADD_FRIEND_URL = "https://line.me/ti/p/msIk4x7U95";
        const SOCIAL_LINKS = {
            tiktok: "https://reurl.cc/Yk0E0l",
            fb: "https://reurl.cc/0aZvvK",
            ig: "https://reurl.cc/KO3q5p",
            fanpage: "https://reurl.cc/MMy9gW"
        };
        // ==========================================

        // --- Icons ---
        const Icons = {
            MapPin: ({className}) => <svg className={className} xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"/><circle cx="12" cy="10" r="3"/></svg>,
            TrendingUp: ({className}) => <svg className={className} xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polyline points="22 7 13.5 15.5 8.5 10.5 2 17"/><polyline points="16 7 22 7 22 13"/></svg>,
            AlertCircle: ({className}) => <svg className={className} xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="10"/><line x1="12" x2="12" y1="8" y2="12"/><line x1="12" x2="12.01" y1="16" y2="16"/></svg>,
            Home: ({size, className}) => <svg className={className} xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg>,
            ShieldCheck: ({className, size}) => <svg className={className} xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z"/><path d="m9 12 2 2 4-4"/></svg>,
            Flame: ({className, size}) => <svg className={className} xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z"/></svg>,
            MessageCircle: ({size}) => <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M7.9 20A9 9 0 1 0 4 16.1L2 22Z"/></svg>,
            Share2: ({size}) => <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="18" cy="5" r="3"/><circle cx="6" cy="12" r="3"/><circle cx="18" cy="19" r="3"/><line x1="8.59" x2="15.42" y1="13.51" y2="17.49"/><line x1="15.41" x2="8.59" y1="6.51" y2="10.49"/></svg>,
            Download: ({size}) => <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" x2="12" y1="15" y2="3"/></svg>,
            CheckCircle: ({size, className}) => <svg className={className} xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg>,
            X: ({size}) => <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M18 6 6 18"/><path d="m6 6 18 12"/></svg>,
            Video: ({size}) => <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="m22 8-6 4 6 4V8Z"/><rect width="14" height="12" x="2" y="6" rx="2" ry="2"/></svg>,
            Facebook: ({size}) => <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"/></svg>,
            Instagram: ({size}) => <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect x="2" y="2" width="20" height="20" rx="5" ry="5"/><path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"/><line x1="17.5" y1="6.5" x2="17.51" y2="6.5"/></svg>,
            Users: ({size}) => <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M22 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg>,
            Building: ({size}) => <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect x="4" y="2" width="16" height="20" rx="2" ry="2"/><path d="M9 22v-4h6v4"/><path d="M8 6h.01"/><path d="M16 6h.01"/><path d="M8 10h.01"/><path d="M16 10h.01"/><path d="M8 14h.01"/><path d="M16 14h.01"/></svg>,
            Store: ({size}) => <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7"/><path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"/><path d="M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4"/><path d="M2 7h20"/><path d="M22 7v3a2 2 0 0 1-2 2v0a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12v0a2 2 0 0 1-2-2V7"/></svg>
        };

        // --- è³‡æ–™åº« (æ“´å……ï¼šåŠ å…¥ category æ¬„ä½) ---
        const MARKET_DATA_ALL_TIME_ANALYSIS = [
            // å¤§æ¨“
            { district: 'é¼“å±±å€', area: 'ç¾è¡“é¤¨ç‰¹å€', type: 'ä¸­å¤å¤§æ¨“', category: 'å¤§æ¨“', priceRange: [1300, 2400], trend: 'ğŸ›¡ï¸ä¿å€¼' },
            { district: 'é¼“å±±å€', area: 'ç¾è¡“é¤¨ç‰¹å€(æ–°)', type: 'æ–°æˆå±‹/é å”®', category: 'å¤§æ¨“', priceRange: [1800, 4500], trend: 'ğŸ”¥é£†æ¼²' },
            { district: 'å·¦ç‡Ÿå€', area: 'é«˜éµç‰¹å€', type: 'ä¸­å¤å¤§æ¨“', category: 'å¤§æ¨“', priceRange: [1100, 1900], trend: 'ğŸ“ˆç©©å¥' },
            { district: 'å·¦ç‡Ÿå€', area: 'æœè²¿ç¤¾å€', type: 'åœ“ç’°å¤§æ¨“', category: 'å¤§æ¨“', priceRange: [550, 950], trend: 'ğŸ’°è£œæ¼²' },
            { district: 'æ¥ æ¢“å€', area: 'é«˜å¤§ç‰¹å€', type: 'æ–°æˆå±‹', category: 'å¤§æ¨“', priceRange: [1000, 1600], trend: 'ğŸ”¥é£†æ¼²' },
            { district: 'æ©‹é ­å€', area: 'æ–°å¸‚é®', type: 'æ–°æˆå±‹', category: 'å¤§æ¨“', priceRange: [1100, 1700], trend: 'ğŸ”¥é£†æ¼²' },
            { district: 'å‰é®å€', area: 'äºæ´²æ–°ç£å€', type: 'æ–°æˆå±‹', category: 'å¤§æ¨“', priceRange: [1000, 1800], trend: 'ğŸ”¥é£†æ¼²' },
            { district: 'è‹“é›…å€', area: 'æ–‡åŒ–ä¸­å¿ƒ', type: 'ä¸­å¤å¤§æ¨“', category: 'å¤§æ¨“', priceRange: [900, 1600], trend: 'ğŸ›¡ï¸ä¿å€¼' },
            { district: 'é³³å±±å€', area: 'æ–‡å±±ç‰¹å€', type: 'ä¸­å¤å¤§æ¨“', category: 'å¤§æ¨“', priceRange: [1200, 2000], trend: 'ğŸ›¡ï¸ä¿å€¼' },
            { district: 'ä¸‰æ°‘å€', area: 'æ²³å ¤ç¤¾å€', type: 'ä¸­å¤å¤§æ¨“', category: 'å¤§æ¨“', priceRange: [900, 1600], trend: 'ğŸ›¡ï¸ä¿å€¼' },
            { district: 'é¹½åŸ•å€', area: 'é§äºŒç‰¹å€', type: 'ä¸­å¤å¤§æ¨“', category: 'å¤§æ¨“', priceRange: [650, 1100], trend: 'ğŸ“ˆç©©å¥' },
            
            // é€å¤©
            { district: 'ä»æ­¦å€', area: 'å…«å¦å¯®/æ¾„å¾·', type: 'é€å¤©åˆ¥å¢…', category: 'é€å¤©', priceRange: [1500, 2500], trend: 'ğŸ“ˆç©©å¥' },
            { district: 'å²¡å±±å€', area: 'ç«è»Šç«™å‘¨é‚Š', type: 'é€å¤©', category: 'é€å¤©', priceRange: [1200, 1800], trend: 'ğŸ“ˆç©©å¥' },
            { district: 'å¤§å¯®å€', area: 'å¤§ç™¼/å¸‚å€', type: 'é€å¤©', category: 'é€å¤©', priceRange: [800, 1300], trend: 'ğŸ’°ä½åŸºæœŸ' },
            { district: 'æ—åœ’å€', area: 'æ²¿æµ·è·¯å‘¨é‚Š', type: 'é€å¤©', category: 'é€å¤©', priceRange: [600, 1000], trend: 'ğŸ’°ä½åŸºæœŸ' },
            { district: 'æ¥ æ¢“å€', area: 'åœŸåº«é‡åŠƒå€', type: 'é€å¤©', category: 'é€å¤©', priceRange: [1300, 1900], trend: 'ğŸ“ˆç©©å¥' },

            // è¯å»ˆ
            { district: 'æ–°èˆˆå€', area: 'å…­åˆ/ç¾éº—å³¶', type: 'è¯å»ˆ', category: 'è¯å»ˆ', priceRange: [700, 1300], trend: 'ğŸ’°è£œæ¼²' },
            { district: 'å°æ¸¯å€', area: 'æ¼¢æ°‘å•†åœˆ', type: 'è¯å»ˆ', category: 'è¯å»ˆ', priceRange: [500, 950], trend: 'ğŸ’°ä½åŸºæœŸ' },
            { district: 'é³³å±±å€', area: 'é³³å±±åœ‹ä¸­/å¤§å¯®', type: 'è¯å»ˆ', category: 'è¯å»ˆ', priceRange: [600, 1100], trend: 'ğŸ“ˆç©©å¥' },
            { district: 'å¤§å¯®å€', area: 'è¼”è‹±ç§‘å¤§', type: 'è¯å»ˆ', category: 'è¯å»ˆ', priceRange: [450, 800], trend: 'ğŸ’°ä½åŸºæœŸ' },

            // å…¬å¯“
            { district: 'å‰é®å€', area: 'ç‘éš†/äº”ç”²', type: 'å…¬å¯“', category: 'å…¬å¯“', priceRange: [400, 750], trend: 'ğŸ›¡ï¸ä¿å€¼' },
            { district: 'ä¸‰æ°‘å€', area: 'å»ºå·¥/é«˜ç§‘å¤§', type: 'å…¬å¯“', category: 'å…¬å¯“', priceRange: [400, 700], trend: 'ğŸ“ˆç©©å¥' },
            { district: 'é¹½åŸ•å€', area: 'èˆŠå¸‚å€', type: 'å…¬å¯“', category: 'å…¬å¯“', priceRange: [350, 650], trend: 'ğŸ’°ä½åŸºæœŸ' },
            { district: 'è‹“é›…å€', area: 'ä¸‰å¤š/85å¤§æ¨“', type: 'å¥—æˆ¿/å…©æˆ¿', category: 'å…¬å¯“', priceRange: [450, 850], trend: 'ğŸ’°ä½åŸºæœŸ' },

            // åº—é¢
            { district: 'é¼“å±±å€', area: 'ç¾è¡“é¤¨ç‰¹å€', type: 'é»ƒé‡‘åº—é¢', category: 'åº—é¢', priceRange: [3000, 6000], trend: 'ğŸ”¥é£†æ¼²' },
            { district: 'å·¦ç‡Ÿå€', area: 'å·¨è›‹å•†åœˆ', type: 'é€å¤©åº—é¢', category: 'åº—é¢', priceRange: [4000, 8000], trend: 'ğŸ”¥é£†æ¼²' },
            { district: 'è‹“é›…å€', area: 'ä¸‰å¤šå•†åœˆ', type: 'å¤§æ¨“åº—é¢', category: 'åº—é¢', priceRange: [1500, 3500], trend: 'ğŸ›¡ï¸ä¿å€¼' },
            { district: 'ä¸‰æ°‘å€', area: 'ç†±æ²³/å‰æ—', type: 'é€å¤©åº—é¢', category: 'åº—é¢', priceRange: [2500, 4500], trend: 'ğŸ“ˆç©©å¥' },
        ];

        // --- ä¸»ç¨‹å¼ App ---
        const App = () => {
            const [monthlySalary, setMonthlySalary] = useState(60000);
            const [interestRate, setInterestRate] = useState(2.2);
            const [loanTermYears, setLoanTermYears] = useState(30);
            const [downPaymentRatio, setDownPaymentRatio] = useState(20);
            const [gracePeriod, setGracePeriod] = useState(0);
            const [isNewYouth, setIsNewYouth] = useState(false);
            const [showReport, setShowReport] = useState(false); 
            const [propertyTypeFilter, setPropertyTypeFilter] = useState('å…¨éƒ¨'); // ç‰©ä»¶é¡å‹éæ¿¾å™¨

            const [results, setResults] = useState({
                safe: { monthlyPayment: 0, loanAmount: 0, totalHousePrice: 0 },
                risk: { monthlyPayment: 0, loanAmount: 0, totalHousePrice: 0 },
                gracePayment: 0,
            });

            const toggleNewYouth = () => {
                if (!isNewYouth) {
                    setInterestRate(1.775);
                    setLoanTermYears(40);
                    setGracePeriod(5);
                    setIsNewYouth(true);
                } else {
                    setInterestRate(2.2);
                    setLoanTermYears(30);
                    setGracePeriod(0);
                    setIsNewYouth(false);
                }
            };

            useEffect(() => {
                calculateAffordability();
            }, [monthlySalary, interestRate, loanTermYears, downPaymentRatio, gracePeriod]);

            const calculateAffordability = () => {
                const safeMonthlyPayment = monthlySalary / 3;
                const riskMonthlyPayment = monthlySalary * 0.6;
                const monthlyRate = interestRate / 100 / 12;
                const totalMonths = loanTermYears * 12;
                
                const amortizationFactor = (monthlyRate * Math.pow(1 + monthlyRate, totalMonths)) / (Math.pow(1 + monthlyRate, totalMonths) - 1);
                
                const safeLoanAmount = Math.floor(safeMonthlyPayment / amortizationFactor);
                const riskLoanAmount = Math.floor(riskMonthlyPayment / amortizationFactor);
                
                const loanRatio = (100 - downPaymentRatio) / 100;
                const safeHousePrice = Math.floor(safeLoanAmount / loanRatio);
                const riskHousePrice = Math.floor(riskLoanAmount / loanRatio);

                const interestOnlyPayment = Math.round((safeLoanAmount * (interestRate/100)) / 12);

                setResults({
                    safe: { monthlyPayment: Math.round(safeMonthlyPayment), loanAmount: Math.round(safeLoanAmount / 10000), totalHousePrice: Math.round(safeHousePrice / 10000) },
                    risk: { monthlyPayment: Math.round(riskMonthlyPayment), loanAmount: Math.round(riskLoanAmount / 10000), totalHousePrice: Math.round(riskHousePrice / 10000) },
                    gracePayment: interestOnlyPayment
                });
            };

            const formatNumber = (num) => new Intl.NumberFormat('zh-TW').format(num);

            const getAreaStatus = (priceRange) => {
                const [min, max] = priceRange;
                const safeBudget = results.safe.totalHousePrice;
                const riskBudget = results.risk.totalHousePrice;

                if (safeBudget >= min) return 'safe'; 
                if (riskBudget >= min) return 'risk'; 
                return 'out'; 
            };

            const handleShare = () => {
                if (navigator.share) {
                    navigator.share({
                        title: 'Lungå“¥çš„é«˜é›„è²·æˆ¿æˆ°æƒ…å®¤',
                        text: `æˆ‘æœˆè–ª${monthlySalary}ï¼Œç®—å‡ºå®‰å…¨è²·æˆ¿é ç®—æ˜¯${results.safe.totalHousePrice}è¬ï¼å¿«ä¾†çœ‹çœ‹ä½ åœ¨é«˜é›„èƒ½è²·å“ªï¼Ÿ`,
                        url: window.location.href,
                    });
                } else {
                    alert("é€£çµå·²è¤‡è£½ï¼å¿«å‚³çµ¦æœ‹å‹çœ‹çœ‹");
                }
            };

            // éæ¿¾å™¨æŒ‰éˆ•çµ„ä»¶
            const FilterTabs = () => {
                const types = ['å…¨éƒ¨', 'å¤§æ¨“', 'é€å¤©', 'è¯å»ˆ', 'å…¬å¯“', 'åº—é¢'];
                return (
                    <div className="flex gap-2 overflow-x-auto no-scrollbar pb-2 mb-4">
                        {types.map(type => (
                            <button 
                                key={type}
                                onClick={() => setPropertyTypeFilter(type)}
                                className={`whitespace-nowrap px-4 py-2 rounded-full text-sm font-bold transition-all ${propertyTypeFilter === type ? 'bg-slate-800 text-white shadow-lg scale-105' : 'bg-slate-100 text-slate-500 hover:bg-slate-200'}`}
                            >
                                {type}
                            </button>
                        ))}
                    </div>
                );
            };

            return (
                <div className="max-w-md md:max-w-4xl mx-auto min-h-screen pb-20">
                    
                    {/* Header */}
                    <div className="bg-white p-6 rounded-b-3xl shadow-sm mb-6 sticky top-0 z-40 bg-opacity-90 backdrop-blur-md">
                        <div className="flex justify-between items-center mb-2">
                            <h2 className="text-xl font-black text-slate-800 flex items-center gap-2">
                                <span className="bg-blue-600 text-white p-1 rounded-lg"><Icons.Home size={18} /></span>
                                Lungå“¥çš„é«˜é›„è²·æˆ¿æˆ°æƒ…å®¤
                            </h2>
                            <div className="flex gap-2">
                                <button onClick={handleShare} className="bg-slate-100 text-blue-600 p-2 rounded-full hover:bg-blue-50 transition-colors">
                                    <Icons.Share2 size={20} />
                                </button>
                                <button onClick={() => setShowReport(true)} className="bg-slate-800 text-white text-xs px-3 py-1.5 rounded-full flex items-center gap-1 font-bold shadow-lg hover:scale-105 transition-transform whitespace-nowrap">
                                    <Icons.TrendingUp className="text-yellow-400" />
                                    ç”Ÿæˆå ±å‘Š
                                </button>
                            </div>
                        </div>
                    </div>

                    <div className="px-4 md:px-6 space-y-6">
                        
                        {/* 1. è¼¸å…¥æ ¸å¿ƒå€ */}
                        <div className="bg-white p-6 rounded-3xl shadow-sm border border-slate-100">
                            <div className="mb-6">
                                <label className="text-sm font-bold text-slate-500 mb-2 block">æ‚¨çš„æœˆæ”¶å…¥ (TWD)</label>
                                <div className="flex items-center bg-slate-50 rounded-2xl px-4 py-3 border-2 border-transparent focus-within:border-blue-500 transition-all">
                                    <span className="text-2xl font-bold text-slate-400 mr-2">$</span>
                                    <input type="number" value={monthlySalary} onChange={(e) => setMonthlySalary(Number(e.target.value))} className="block w-full text-3xl font-black text-slate-800 bg-transparent focus:outline-none placeholder-slate-300" placeholder="60000"/>
                                </div>
                            </div>

                            <div className="flex items-center justify-between bg-blue-50 p-3 rounded-xl mb-6 cursor-pointer border border-blue-100" onClick={toggleNewYouth}>
                                <div className="flex items-center gap-2">
                                    <div className={`w-5 h-5 rounded-full border-2 flex items-center justify-center ${isNewYouth ? 'bg-blue-600 border-blue-600' : 'border-slate-400'}`}>
                                        {isNewYouth && <Icons.CheckCircle size={14} className="text-white"/>}
                                    </div>
                                    <span className="text-sm font-bold text-blue-800">ä¸€éµå¥—ç”¨ã€Œæ–°é’å®‰æˆ¿è²¸ã€</span>
                                </div>
                                <span className="text-xs text-blue-600 bg-white px-2 py-1 rounded">40å¹´/5å¹´å¯¬é™</span>
                            </div>

                            <div className="grid grid-cols-2 md:grid-cols-4 gap-4">
                                <div><label className="text-xs font-bold text-slate-400">åˆ©ç‡ (%)</label><input type="number" step="0.01" value={interestRate} onChange={(e) => setInterestRate(Number(e.target.value))} className="w-full mt-1 p-2 bg-slate-50 rounded-lg font-bold text-slate-700"/></div>
                                <div><label className="text-xs font-bold text-slate-400">å¹´é™ (å¹´)</label><input type="number" value={loanTermYears} onChange={(e) => setLoanTermYears(Number(e.target.value))} className="w-full mt-1 p-2 bg-slate-50 rounded-lg font-bold text-slate-700"/></div>
                                <div><label className="text-xs font-bold text-slate-400">å¯¬é™ (å¹´)</label><input type="number" value={gracePeriod} onChange={(e) => setGracePeriod(Number(e.target.value))} className="w-full mt-1 p-2 bg-slate-50 rounded-lg font-bold text-slate-700"/></div>
                                <div><label className="text-xs font-bold text-slate-400">è‡ªå‚™ (%)</label><input type="number" value={downPaymentRatio} onChange={(e) => setDownPaymentRatio(Number(e.target.value))} className="w-full mt-1 p-2 bg-slate-50 rounded-lg font-bold text-slate-700"/></div>
                            </div>
                        </div>

                        {/* 2. çµæœå„€è¡¨æ¿ */}
                        <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div className="bg-emerald-500 text-white p-6 rounded-3xl relative overflow-hidden shadow-lg shadow-emerald-200">
                                <div className="absolute -right-4 -top-4 w-24 h-24 bg-white opacity-10 rounded-full"></div>
                                <div className="flex justify-between items-start mb-4 relative z-10">
                                    <div><h3 className="text-lg font-bold flex items-center gap-1 opacity-90"><Icons.ShieldCheck size={18}/> èˆ’é©åœˆ (å®‰å…¨)</h3></div>
                                    <span className="bg-white/20 text-xs px-2 py-1 rounded-lg backdrop-blur-sm">æ¨è–¦</span>
                                </div>
                                <div className="mb-2">
                                    <p className="text-sm opacity-80">å»ºè­°ç¸½åƒ¹å¤©èŠ±æ¿</p>
                                    <p className="text-4xl font-black">{formatNumber(results.safe.totalHousePrice)} <span className="text-xl">è¬</span></p>
                                </div>
                                <div className="text-xs bg-black/10 inline-block px-3 py-1 rounded-full">
                                    æœˆä»˜ {formatNumber(results.safe.monthlyPayment)} å…ƒ {gracePeriod > 0 && `(å¯¬é™æœŸ ${formatNumber(results.gracePayment)})`}
                                </div>
                            </div>

                            <div className="bg-white border-2 border-rose-100 p-6 rounded-3xl relative overflow-hidden">
                                <div className="flex justify-between items-start mb-4">
                                    <div><h3 className="text-lg font-bold text-rose-600 flex items-center gap-1"><Icons.Flame size={18}/> å£“åŠ›é‹ (æ¥µé™)</h3></div>
                                </div>
                                <div className="mb-2">
                                    <p className="text-sm text-slate-400">ç·Šç¹ƒç¸½åƒ¹å¤©èŠ±æ¿</p>
                                    <p className="text-4xl font-black text-slate-800">{formatNumber(results.risk.totalHousePrice)} <span className="text-xl">è¬</span></p>
                                </div>
                                <div className="text-xs text-rose-500 bg-rose-50 inline-block px-3 py-1 rounded-full">
                                    æœˆä»˜ {formatNumber(results.risk.monthlyPayment)} å…ƒ (ä½”è–ªæ°´60%)
                                </div>
                            </div>
                        </div>

                        {/* 3. è¦–è¦ºåŒ–åœ°åœ– (ç‰©ä»¶é¡å‹éæ¿¾ç‰ˆ) */}
                        <div className="bg-white p-6 rounded-3xl shadow-sm border border-slate-100">
                            <h3 className="text-xl font-black text-slate-800 mb-4 flex items-center gap-2">
                                <Icons.MapPin className="text-blue-500" /> é«˜é›„æˆ¿å¸‚æˆ°ç•¥åœ°åœ–
                            </h3>
                            
                            {/* éæ¿¾å™¨æŒ‰éˆ• */}
                            <FilterTabs />

                            <div className="flex gap-2 mb-4 text-xs font-bold">
                                <span className="flex items-center gap-1"><span className="w-3 h-3 rounded-full bg-emerald-500"></span> è¼•é¬†è²·</span>
                                <span className="flex items-center gap-1"><span className="w-3 h-3 rounded-full bg-yellow-400"></span> éœ€åŠªåŠ›</span>
                                <span className="flex items-center gap-1"><span className="w-3 h-3 rounded-full bg-slate-200"></span> é ç®—ä¸è¶³</span>
                            </div>

                            <div className="grid grid-cols-2 md:grid-cols-4 gap-3 fade-in">
                                {MARKET_DATA_ALL_TIME_ANALYSIS
                                    .filter(item => propertyTypeFilter === 'å…¨éƒ¨' || item.category === propertyTypeFilter)
                                    .map((spot, idx) => {
                                        const status = getAreaStatus(spot.priceRange);
                                        let bgClass = "bg-slate-100 text-slate-400 border-transparent opacity-60"; 
                                        if (status === 'safe') bgClass = "bg-emerald-50 border-emerald-200 text-emerald-800 hover:bg-emerald-100 hover:shadow-md cursor-pointer";
                                        if (status === 'risk') bgClass = "bg-yellow-50 border-yellow-200 text-yellow-800 hover:bg-yellow-100 hover:shadow-md cursor-pointer";

                                        return (
                                            <div key={idx} className={`p-3 rounded-xl border-2 transition-all ${bgClass} flex flex-col justify-between h-24`}>
                                                <div className="flex justify-between items-start">
                                                    <span className="font-bold text-sm">{spot.district}</span>
                                                    <span className="text-[10px] px-1.5 py-0.5 rounded-md bg-white/50 backdrop-blur-sm">{spot.trend}</span>
                                                </div>
                                                <div>
                                                    <div className="text-xs truncate font-medium">{spot.area}</div>
                                                    <div className="text-xs font-bold mt-1">{spot.priceRange[0]}-{spot.priceRange[1]}è¬</div>
                                                </div>
                                            </div>
                                        )
                                })}
                                {MARKET_DATA_ALL_TIME_ANALYSIS.filter(item => propertyTypeFilter === 'å…¨éƒ¨' || item.category === propertyTypeFilter).length === 0 && (
                                    <div className="col-span-2 md:col-span-4 text-center py-8 text-slate-400 text-sm">
                                        æ­¤é¡å‹ç›®å‰ç„¡æ¨è–¦å€åŸŸï¼Œè«‹å˜—è©¦å…¶ä»–é¸é …
                                    </div>
                                )}
                            </div>
                        </div>

                        {/* Footer & Social */}
                        <div className="bg-slate-800 rounded-3xl p-8 text-center text-white relative overflow-hidden">
                            <div className="relative z-10 flex flex-col items-center">
                                <div className="w-20 h-20 rounded-full p-1 bg-gradient-to-tr from-blue-400 to-emerald-400 mb-4 shadow-xl">
                                    <img src={USER_PHOTO_URL} className="w-full h-full rounded-full object-cover border-2 border-slate-800" style={{ objectPosition: 'center 15%' }} />
                                </div>
                                <h3 className="text-xl font-bold mb-2">é‚„åœ¨çŒ¶è±«è©²è²·å“ªè£¡ï¼Ÿ</h3>
                                <p className="text-slate-300 text-sm mb-6 max-w-sm mx-auto">æ•¸æ“šåªæ˜¯åƒè€ƒï¼Œèƒ½è²·åˆ°ä¾¿å®œæ‰æ˜¯çœŸæœ¬äº‹ã€‚é»æ“Šä¸‹æ–¹æŒ‰éˆ•ï¼Œç›´æ¥æ‰¾ Lungå“¥ å¹«ä½ æŠŠé—œã€‚</p>
                                <button onClick={() => window.open(LINE_ADD_FRIEND_URL, '_blank')} className="bg-[#06c755] hover:bg-[#05b64d] text-white font-bold py-3 px-8 rounded-full flex items-center gap-2 shadow-lg shadow-green-900/20 transform transition hover:scale-105 active:scale-95">
                                    <Icons.MessageCircle size={20} /> åŠ  Lungå“¥ Line è«®è©¢
                                </button>

                                <div className="flex flex-wrap justify-center gap-4 mt-8 pt-8 border-t border-slate-700 w-full">
                                    <a href={SOCIAL_LINKS.tiktok} target="_blank" className="p-2 bg-slate-700 rounded-full hover:bg-black transition-colors"><Icons.Video size={18}/></a>
                                    <a href={SOCIAL_LINKS.fb} target="_blank" className="p-2 bg-slate-700 rounded-full hover:bg-[#1877F2] transition-colors"><Icons.Facebook size={18}/></a>
                                    <a href={SOCIAL_LINKS.ig} target="_blank" className="p-2 bg-slate-700 rounded-full hover:bg-pink-600 transition-colors"><Icons.Instagram size={18}/></a>
                                    <a href={SOCIAL_LINKS.fanpage} target="_blank" className="p-2 bg-slate-700 rounded-full hover:bg-blue-600 transition-colors"><Icons.Users size={18}/></a>
                                </div>
                                <p className="text-xs text-slate-500 mt-6">Â© Lungå“¥çš„é«˜é›„è²·æˆ¿æˆ°æƒ…å®¤</p>
                            </div>
                        </div>
                    </div>

                    {/* Disclaimer - é€™è£¡å°±æ˜¯æ‚¨è¦çš„è³‡æ–™ä¾†æºèˆ‡å…è²¬è²æ˜ (é›»è…¦/æ‰‹æ©Ÿçš†é¡¯ç¤º) */}
                    <div className="text-center mt-4 text-xs text-slate-400 pb-8 px-4">
                        <p>è³‡æ–™ä¾†æºï¼šå…§æ”¿éƒ¨å¯¦åƒ¹ç™»éŒ„ (æ­·å¹´è³‡æ–™å¤§æ•¸æ“šåˆ†æ - 2025/11/29 ç¾æ³æ›´æ–°) | æˆ¿è²¸è©¦ç®—åƒ…ä¾›åƒè€ƒï¼Œå¯¦éš›æ ¸è²¸ä¾éŠ€è¡Œç‚ºæº–</p>
                    </div>

                    {/* Report Modal */}
                    {showReport && (
                        <div className="fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-fade-in" onClick={() => setShowReport(false)}>
                            <div className="bg-slate-900 w-full max-w-sm rounded-3xl overflow-hidden shadow-2xl relative" onClick={e => e.stopPropagation()}>
                                <button onClick={() => setShowReport(false)} className="absolute top-4 right-4 text-slate-400 hover:text-white z-20"><Icons.X size={24}/></button>
                                
                                <div className="p-8 text-center text-white bg-[url('https://www.transparenttextures.com/patterns/cubes.png')]">
                                    <div className="flex flex-col items-center mb-6">
                                        <div className="w-16 h-16 rounded-full border-2 border-emerald-400 p-0.5 mb-3">
                                            <img src={USER_PHOTO_URL} className="w-full h-full rounded-full object-cover" style={{ objectPosition: 'center 15%' }}/>
                                        </div>
                                        <h3 className="text-xl font-black">Lungå“¥è²·æˆ¿æˆ°æƒ…å®¤</h3>
                                        <p className="text-xs text-emerald-400 font-bold uppercase tracking-wider">Analysis Report</p>
                                    </div>

                                    <div className="bg-white/10 rounded-2xl p-4 mb-6 backdrop-blur-md border border-white/10">
                                        <div className="grid grid-cols-2 gap-4 mb-4 text-left">
                                            <div>
                                                <p className="text-xs text-slate-400">æœˆæ”¶å…¥</p>
                                                <p className="text-xl font-bold">${formatNumber(monthlySalary)}</p>
                                            </div>
                                            <div>
                                                <p className="text-xs text-slate-400">å®‰å…¨ç¸½åƒ¹</p>
                                                <p className="text-xl font-bold text-emerald-400">${formatNumber(results.safe.totalHousePrice)}è¬</p>
                                            </div>
                                        </div>
                                        <div className="h-px bg-white/10 mb-4"></div>
                                        <div className="text-left">
                                            <p className="text-xs text-slate-400 mb-2">ç³»çµ±æ¨è–¦ç†±å€</p>
                                            <div className="flex flex-wrap gap-2">
                                                {MARKET_DATA_ALL_TIME_ANALYSIS
                                                    .filter(s => getAreaStatus(s.priceRange) === 'safe')
                                                    .filter(s => propertyTypeFilter === 'å…¨éƒ¨' || s.category === propertyTypeFilter)
                                                    .slice(0, 3).map((s, i) => (
                                                    <span key={i} className="text-xs bg-emerald-500/20 text-emerald-300 px-2 py-1 rounded">{s.area}</span>
                                                ))}
                                                {MARKET_DATA_ALL_TIME_ANALYSIS
                                                    .filter(s => getAreaStatus(s.priceRange) === 'safe')
                                                    .filter(s => propertyTypeFilter === 'å…¨éƒ¨' || s.category === propertyTypeFilter)
                                                    .length === 0 && <span className="text-xs text-slate-500">æš«ç„¡åŒ¹é…å€åŸŸ</span>}
                                            </div>
                                        </div>
                                    </div>

                                    <div className="flex items-center justify-center gap-4">
                                        <div className="bg-white p-1 rounded-lg">
                                            <img src={`https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=${LINE_ADD_FRIEND_URL}`} className="w-16 h-16" />
                                        </div>
                                        <div className="text-left">
                                            <p className="text-sm font-bold">æƒæåŠ å¥½å‹</p>
                                            <p className="text-xs text-slate-400">é ç´„ 1å°1 è«®è©¢</p>
                                            <p className="text-xs text-slate-500 mt-1">ID: Lungå“¥</p>
                                        </div>
                                    </div>
                                    
                                    <p className="text-[10px] text-slate-600 mt-6">è³‡æ–™ä¾†æºï¼šå…§æ”¿éƒ¨å¯¦åƒ¹ç™»éŒ„ | æˆ¿è²¸è©¦ç®—åƒ…ä¾›åƒè€ƒï¼Œå¯¦éš›æ ¸è²¸ä¾éŠ€è¡Œç‚ºæº–</p>
                                </div>
                            </div>
                        </div>
                    )}
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
